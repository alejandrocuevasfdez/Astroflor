<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Astroflor - Inicio</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Italiana&family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="about-page">
  <header>
    <div class="logo">
      <img src="https://www.astroflor.com/wp-content/uploads/2023/07/LOGO-ASTROFLOR.png" alt="Astroflor Logo">
    </div>
    <nav>
      <ul>
        <li><a href="index.html" class="active">Inicio</a></li>
        <li><a href="about.html">Sobre nosotros</a></li>
        <li><a href="blog.html">Blog</a></li>
        <li><a href="shop.html">Tienda</a></li>
        <li><a href="contact.html">Contacto</a></li>
      </ul>
    </nav>
  </header>

  <!-- Icono de accesibilidad flotante -->
  <div class="accessibility-widget">
    <button class="accessibility-btn" aria-label="Herramientas de accesibilidad">
      <img src="https://images.icon-icons.com/91/PNG/512/accessibility_16440.png" alt="Accesibilidad" style="width:48px; height:48px;">
    </button>
    <div class="accessibility-tools">
      <ul>
        <li><button type="button">Aumentar texto</button></li>
        <li><button type="button">Reducir texto</button></li>
        <li><button type="button">Alto contraste</button></li>
        <li><button type="button">Fuente legible</button></li>
      </ul>
    </div>
  </div>

  <!-- Hero con recuadro destacado -->
  <section class="hero">
    <div class="hero-box hero-img-fondo">
      <h1>Astroflor</h1>
      <p id="typed-text">Más de 25 años importando flores con la mejor calidad.</p>
      <a href="shop.html" class="btn">Visita nuestra Tienda</a>
    </div>
  </section>



  <div class="contenedor-valoracion-info">
    <section class="valoracion">
      <h2>Déjanos tu valoración</h2>
      <form id="valoracion-form">
        <label for="rating">¿Qué te ha parecido nuestra página?</label>
        <textarea id="comentario-valoracion" name="comentario" rows="2" placeholder="Escribe tu comentario aquí..." style="width:90%;margin:12px 0;border-radius:8px;padding:8px;border:1px solid #ccc;font-size:0.95rem;"></textarea>
        <div class="estrellas">
          <input type="radio" id="estrella5" name="rating" value="5"><label for="estrella5">&#9733;</label>
          <input type="radio" id="estrella4" name="rating" value="4"><label for="estrella4">&#9733;</label>
          <input type="radio" id="estrella3" name="rating" value="3"><label for="estrella3">&#9733;</label>
          <input type="radio" id="estrella2" name="rating" value="2"><label for="estrella2">&#9733;</label>
          <input type="radio" id="estrella1" name="rating" value="1"><label for="estrella1">&#9733;</label>
        </div>
        <button type="submit" class="btn" style="font-size:0.95rem;padding:0.5em 1.2em;">Enviar valoración</button>
      </form>
      <div id="media-valoraciones">
        <strong>Media global:</strong> <span id="media">0.0</span> <span id="media-estrellas"></span> (<span id="total-votos">0</span> valoraciones)
      </div>
    </section>

    <aside class="info-empresa">
      <h3>Información de contacto</h3>
      <p>
        <span class="icono-contacto">
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="#0064AF" viewBox="0 0 24 24" style="vertical-align:middle;margin-right:8px;">
            <path d="M6.62 10.79a15.053 15.053 0 006.59 6.59l2.2-2.2a1 1 0 011.01-.24c1.12.37 2.33.57 3.58.57a1 1 0 011 1V20a1 1 0 01-1 1C10.07 21 3 13.93 3 5a1 1 0 011-1h3.5a1 1 0 011 1c0 1.25.2 2.46.57 3.58a1 1 0 01-.24 1.01l-2.2 2.2z"/>
          </svg>
        </span>
        <strong>Teléfono:</strong> <a href="tel:+34913864681">+34 913 864 681</a>
      </p>
      <p>
        <span class="icono-contacto">
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="#0064AF" viewBox="0 0 24 24" style="vertical-align:middle;margin-right:8px;">
            <path d="M20 4H4a2 2 0 00-2 2v12a2 2 0 002 2h16a2 2 0 002-2V6a2 2 0 00-2-2zm0 2v.01L12 13 4 6.01V6h16zM4 20v-9.99l7.29 6.36a1 1 0 001.42 0L20 10.01V20H4z"/>
          </svg>
        </span>
        <strong>Correo:</strong> <a href="mailto:astroflor@astroflor.com">astroflor@astroflor.com</a>
      </p>
    </aside>

    <div class="mapa-empresa">
      <h3>Ubicación</h3>
      <iframe
        src="https://www.google.com/maps?q=Gta.+Prta+de+Hierro,+Moncloa+-+Aravaca,+28040+Madrid&output=embed"
        width="100%" height="300" style="border:0; border-radius:10px;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
      </iframe>
    </div>
  </div>

  <!-- Nueva sección añadida -->
  <div class="intro-testimonios">
    <img src="https://lh3.googleusercontent.com/p/AF1QipOfxOnr3VdXc1kaLOGY0B_j5BmeROQOhCmJUyM=s1360-w1360-h1020-rw" alt="Astroflor instalaciones" class="intro-img">
    <p>
      Astroflor es una empresa líder en la importación y distribución de flores de alta calidad, con más de 25 años de experiencia en el sector.<br>
      Nuestro compromiso es ofrecer siempre el mejor producto y servicio a nuestros clientes, garantizando frescura, variedad y atención personalizada.
    </p>
    <video class="intro-video" src="https://www.astroflor.com/wp-content/uploads/2025/08/VIDEO-FLOTA.mp4" controls loop poster="https://www.astroflor.com/wp-content/uploads/2023/07/LOGO-ASTROFLOR.png"></video>
    <p class="reparto-texto">
      Contamos con <strong>flota propia de reparto</strong> para asegurar que tus flores lleguen siempre frescas y puntuales. Nuestro equipo de logística está especializado en el transporte delicado de flores, garantizando la máxima calidad desde nuestras instalaciones hasta tu negocio.
    </p>
  </div>

  <section class="testimonios">
    <h2>Opiniones de nuestros clientes</h2>
    <div class="testimonios-lista">
      <div class="testimonio">
        <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Marta G.">
        <p>"Flores siempre frescas y atención excelente. ¡Repetiré!"</p>
        <span>- Marta G.</span>
        <div class="estrellas-testimonio">
          <i class="fa fa-star"></i>
          <i class="fa fa-star"></i>
          <i class="fa fa-star"></i>
          <i class="fa fa-star"></i>
          <i class="fa fa-star"></i>
        </div>
      </div>
      <div class="testimonio">
        <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Juan P.">
        <p>"Gran variedad y entrega puntual. Muy recomendable."</p>
        <span>- Juan P.</span>
        <div class="estrellas-testimonio">
          <i class="fa fa-star"></i>
          <i class="fa fa-star"></i>
          <i class="fa fa-star"></i>
          <i class="fa fa-star"></i>
          <i class="fa fa-star-half-o"></i>
        </div>
      </div>
      <div class="testimonio">
        <img src="https://randomuser.me/api/portraits/women/65.jpg" alt="Lucía R.">
        <p>"El ramo llegó precioso y el trato fue muy profesional. ¡Gracias por todo!"</p>
        <span>- Lucía R.</span>
        <div class="estrellas-testimonio">
          <i class="fa fa-star"></i>
          <i class="fa fa-star"></i>
          <i class="fa fa-star"></i>
          <i class="fa fa-star"></i>
          <i class="fa fa-star"></i>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <p>&copy; 2025 Astroflor - Todos los derechos reservados</p>
  </footer>

  <!-- Icono flotante para abrir el chatbot -->
  <button id="chatbot-toggle" class="chatbot-toggle" aria-label="Abrir chat">
    <img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" alt="WhatsApp" style="width:48px;">
  </button>

  <!-- Chatbot de WhatsApp -->
  <div id="chatbot-whatsapp" class="chatbot oculto">
    <div class="chatbot-header">
      <h3>Asistente Astroflor</h3>
      <button id="cerrar-chatbot" class="cerrar-chatbot" aria-label="Cerrar chatbot">
        &times;
      </button>
    </div>
    <div id="chatbot-mensajes" class="chatbot-mensajes">
      <!-- Mensajes del chatbot -->
    </div>
    <form id="chatbot-form" class="chatbot-form">
      <input id="chatbot-input" type="text" placeholder="Escribe tu mensaje..." aria-label="Escribe tu mensaje">
      <button type="submit" class="btn">Enviar</button>
    </form>
  </div>

  <script>
    // Accesibilidad
    let fontSize = 100;
    const root = document.documentElement;

    document.querySelectorAll('.accessibility-tools button')[0].onclick = function() {
      if (fontSize < 150) fontSize += 10;
      root.style.fontSize = fontSize + '%';
    };
    document.querySelectorAll('.accessibility-tools button')[1].onclick = function() {
      if (fontSize > 70) fontSize -= 10;
      root.style.fontSize = fontSize + '%';
    };
    let contrasteActivo = false;
    document.querySelectorAll('.accessibility-tools button')[2].onclick = function() {
      contrasteActivo = !contrasteActivo;
      if (contrasteActivo) {
        document.body.style.background = "#000";
        document.body.style.color = "#fff";
        document.querySelectorAll('section, article, .card, header, footer').forEach(el => {
          el.style.background = "#000";
          el.style.color = "#fff";
        });
        document.querySelectorAll('.btn, .accessibility-tools button').forEach(el => {
          el.style.background = "#fff";
          el.style.color = "#000";
        });
      } else {
        document.body.style.background = "";
        document.body.style.color = "";
        document.querySelectorAll('section, article, .card, header, footer').forEach(el => {
          el.style.background = "";
          el.style.color = "";
        });
        document.querySelectorAll('.btn, .accessibility-tools button').forEach(el => {
          el.style.background = "";
          el.style.color = "";
        });
      }
    };

    let fuenteLegible = false;
    document.querySelectorAll('.accessibility-tools button')[3].onclick = function() {
      fuenteLegible = !fuenteLegible;
      if (fuenteLegible) {
        document.body.style.fontFamily = "Arial, Helvetica, sans-serif";
      } else {
        document.body.style.fontFamily = "'Montserrat', sans-serif";
      }
    };

    // Texto animado tipo fade
    const frases = [
      "Más de 25 años importando flores con la mejor calidad.",
      "Flores con detalles.",
      "Flores con frescura."
    ];
    let fraseActual = 0;
    const typedText = document.getElementById('typed-text');

    function mostrarFraseFade() {
      typedText.style.opacity = 0;
      setTimeout(() => {
        typedText.textContent = frases[fraseActual];
        typedText.style.opacity = 1;
        fraseActual = (fraseActual + 1) % frases.length;
        setTimeout(mostrarFraseFade, 2500);
      }, 500);
    }
    typedText.style.transition = "opacity 0.5s";
    setTimeout(mostrarFraseFade, 2500);

    // Valoraciones
    const form = document.getElementById('valoracion-form');
    const mediaSpan = document.getElementById('media');
    const mediaEstrellas = document.getElementById('media-estrellas');
    const totalVotos = document.getElementById('total-votos');

    function getValoraciones() {
      return JSON.parse(localStorage.getItem('valoracionesAstroflor') || '[]');
    }
    function setValoraciones(arr) {
      localStorage.setItem('valoracionesAstroflor', JSON.stringify(arr));
    }

    function actualizarMedia() {
      const valoraciones = getValoraciones();
      const total = valoraciones.length;
      let media = 0;
      if (total > 0) {
        media = valoraciones.reduce((a, b) => a + b, 0) / total;
      }
      mediaSpan.textContent = media.toFixed(1);
      totalVotos.textContent = total;
      let estrellas = '';
      for (let i = 1; i <= 5; i++) {
        estrellas += i <= Math.round(media) ? '★' : '☆';
      }
      mediaEstrellas.textContent = estrellas;
    }

    form.addEventListener('submit', function(e) {
      e.preventDefault();
      const rating = form.rating.value;
      if (!rating) return;
      const valoraciones = getValoraciones();
      valoraciones.push(Number(rating));
      setValoraciones(valoraciones);
      actualizarMedia();
      form.reset();
      alert('¡Gracias por tu valoración!');
    });

    actualizarMedia();

    // Banner principal se desvanece al bajar y aparece al subir
    let lastScroll = window.scrollY;
    const hero = document.querySelector('.hero');
    window.addEventListener('scroll', function() {
      const currentScroll = window.scrollY;
      if (currentScroll > lastScroll && currentScroll > 100) {
        // Bajando
        hero.classList.add('oculto');
      } else if (currentScroll < lastScroll) {
        // Subiendo
        hero.classList.remove('oculto');
      }
      lastScroll = currentScroll;
    });

    // Chatbot WhatsApp
    const chatbotToggle = document.getElementById('chatbot-toggle');
    const chatbot = document.getElementById('chatbot-whatsapp');
    const cerrarChatbot = document.getElementById('cerrar-chatbot');
    const chatbotForm = document.getElementById('chatbot-form');
    const chatbotInput = document.getElementById('chatbot-input');
    const chatbotMensajes = document.getElementById('chatbot-mensajes');

    // Mostrar chatbot al hacer clic en el icono flotante
    chatbotToggle.addEventListener('click', function(e) {
      e.preventDefault();
      chatbot.classList.remove('oculto');
    });

    // Cerrar chatbot
    cerrarChatbot.addEventListener('click', function() {
      chatbot.classList.add('oculto');
    });

    // Enviar mensaje
    chatbotForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const mensaje = chatbotInput.value.trim();
      if (!mensaje) return;
      // Mostrar mensaje del usuario
      const userMsg = document.createElement('div');
      userMsg.className = 'mensaje-user';
      userMsg.textContent = mensaje;
      chatbotMensajes.appendChild(userMsg);

      // Respuesta simple del bot
      setTimeout(() => {
        const botMsg = document.createElement('div');
        botMsg.className = 'mensaje-bot';
        botMsg.textContent = respuestaBot(mensaje);
        chatbotMensajes.appendChild(botMsg);
        chatbotMensajes.scrollTop = chatbotMensajes.scrollHeight;
      }, 700);

      chatbotInput.value = '';
      chatbotMensajes.scrollTop = chatbotMensajes.scrollHeight;
    });

    // Respuestas básicas del bot
    function respuestaBot(texto) {
      texto = texto.toLowerCase();
      if (texto.includes('hola') || texto.includes('buenas')) {
        return '¡Hola! ¿Cómo podemos ayudarte hoy?';
      }
      if (texto.includes('precio') || texto.includes('coste')) {
        return '¿Sobre qué flor te gustaría saber el precio?';
      }
      if (texto.includes('envío') || texto.includes('entrega')) {
        return 'Realizamos envíos en toda España. ¿Dónde necesitas recibir tus flores?';
      }
      if (texto.includes('gracias')) {
        return '¡Gracias a ti! 😊';
      }
      return 'Nuestro equipo te responderá lo antes posible. ¿Quieres dejar tu número de contacto?';
    }

    // Puedes añadir este script al final de tu index.html
    document.addEventListener('DOMContentLoaded', function() {
      const img = document.querySelector('.intro-testimonios .intro-img');
      if (img) {
        img.addEventListener('click', function() {
          img.classList.toggle('expandida');
        });
      }
    });
  </script>
</body>
</html>
